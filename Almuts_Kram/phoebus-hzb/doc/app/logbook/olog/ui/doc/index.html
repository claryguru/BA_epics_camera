
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Olog &#8212; Phoebus 1.0 documentation</title>
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/classic.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../_static/jquery.js"></script>
    <script src="../../../../../_static/underscore.js"></script>
    <script src="../../../../../_static/doctools.js"></script>
    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Save-And-Restore" href="../../../../save-and-restore/app/doc/index.html" />
    <link rel="prev" title="Image Viewer" href="../../../../imageviewer/doc/index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../save-and-restore/app/doc/index.html" title="Save-And-Restore"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../../../../imageviewer/doc/index.html" title="Image Viewer"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.html">Phoebus 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../../../applications.html" accesskey="U">Applications</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Olog</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="olog">
<h1>Olog<a class="headerlink" href="#olog" title="Permalink to this headline">¶</a></h1>
<p>Olog is an electronic logbook client for the logbook service maintained here: <a class="reference external" href="https://github.com/Olog/olog-es">https://github.com/Olog/olog-es</a>.</p>
<p><strong>NOTE</strong>: this is an optional module. For information on how to build a site specific product, see
<a class="reference external" href="https://github.com/ControlSystemStudio/phoebus/tree/master/phoebus-product">https://github.com/ControlSystemStudio/phoebus/tree/master/phoebus-product</a>.</p>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Arbitrary number of “logbooks”, configured in the service. A logbook entry is contained in one or several logbooks.</p></li>
<li><p>Arbitrary number of “tags”, configured in the service. A logbook entry may be associated with zero or several tags.</p></li>
<li><p>Arbitrary number of “properties”, configured on the service. A property is a named list of key/value pairs. The user may define values for the items in a property. A logbook entry is associated with zero or several properties.</p></li>
<li><p>Arbitrary number of attachments, i.e. images or other file types.</p></li>
<li><p>Markup as defined by the Commonmark specification (<a class="reference external" href="https://commonmark.org">https://commonmark.org</a>).</p></li>
<li><p>Log entry editor invocation from context menu whereby context specific attachments or data are automatically appended to the log entry.</p></li>
<li><p>Log entry viewers offer search capabilities based on meta data and content.</p></li>
</ul>
</div>
<div class="section" id="launching-the-log-entry-editor">
<h2>Launching the log entry editor<a class="headerlink" href="#launching-the-log-entry-editor" title="Permalink to this headline">¶</a></h2>
<p>To launch the log entry editor, the user may select Applications -&gt; Utility -&gt; Send to Logbook from the menu:</p>
<img alt="../../../../../_images/SendToLogbook.png" src="../../../../../_images/SendToLogbook.png" />
<p>The log entry editor may also be launched from context menus, where applicable. For instance, with a right click on
the background of an OPI the launched context menu will include the Create Log item:</p>
<img alt="../../../../../_images/ContextMenu.png" src="../../../../../_images/ContextMenu.png" />
<p>The Create Log context menu item is available also in a Databrowser plot area.</p>
</div>
<div class="section" id="editing-a-log-entry">
<h2>Editing a log entry<a class="headerlink" href="#editing-a-log-entry" title="Permalink to this headline">¶</a></h2>
<p>The log entry editor is a non-modal dialog:</p>
<img alt="../../../../../_images/LogEntryEditor.png" src="../../../../../_images/LogEntryEditor.png" />
<p>Mandatory data are:</p>
<ul class="simple">
<li><p>Username and password, see also <a class="reference internal" href="#preferences">preferences</a>.</p></li>
<li><p>Title</p></li>
<li><p>At least one logbook, see also <a class="reference internal" href="#preferences">preferences</a>. Additional logbooks - configured in the service - can be added from a list shown when pressing the down button:</p></li>
</ul>
<img alt="../../../../../_images/LogbookSelection.png" src="../../../../../_images/LogbookSelection.png" />
<p>The body text of the log entry can be styled using markup as defined by the Commonmark specification
(<a class="reference external" href="https://commonmark.org">https://commonmark.org</a>). The Markup Help button will launch the system default browser to display a quick
reference.</p>
</div>
<div class="section" id="attachments">
<h2>Attachments<a class="headerlink" href="#attachments" title="Permalink to this headline">¶</a></h2>
<p>When the log entry editor is launched from a context menu, a screen shot is automatically appended, where applicable.
Additional images (or other type of attachments) may be added by expanding the Attachments editor:</p>
<img alt="../../../../../_images/Attachments.png" src="../../../../../_images/Attachments.png" />
<p>Here user may attach any number of files of arbitrary types:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">Files</span></code> will launch the native file browser dialog from which user may select any number of files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Clipboard</span></code> will attach the file - if any - currently copied to the host OS clipboard.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CSS</span> <span class="pre">Window</span></code> will attach an image of the current application window.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Embed</span> <span class="pre">New</span></code> will launch the dialog to embed an image to the log entry body, see below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Embed</span> <span class="pre">Selected</span></code> will embed user selected image files previously added to the list of attachments.</p></li>
</ul>
<p><strong>NOTE</strong>: The Olog service will not accept upload of attachments larger than the configured limit of 50MB. The Olog service
can be configured to use a different limit, but users should keep in mind that download of large attachments to
the log viewer may incur delays in terms of UI updates.</p>
</div>
<div class="section" id="embedded-images">
<h2>Embedded images<a class="headerlink" href="#embedded-images" title="Permalink to this headline">¶</a></h2>
<p>Images may be embedded in the body text using markup. The user should consult the quick reference (Markup Help button)
for details on how to do this. In general, users should use the Embed Image button to add image markup at the cursor position:</p>
<img alt="../../../../../_images/EmbedImage.png" src="../../../../../_images/EmbedImage.png" />
<p>External image resources may be edited manually, e.g.:
<code class="docutils literal notranslate"><span class="pre">![alt-text](https://foo.com/bar.jpg)</span></code>.
File URLs are not supported.</p>
</div>
<div class="section" id="properties">
<h2>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<p>Properties are edited by expanding the Properties editor. The below screen shot shows that one single property
(LCR shift info) holding five keys has been configured in the service:</p>
<img alt="../../../../../_images/PropertiesEditor.png" src="../../../../../_images/PropertiesEditor.png" />
<p>User may select what properties to include in the log entry, and edit the values for the items in the property.</p>
</div>
<div class="section" id="log-entry-viewer">
<h2>Log entry viewer<a class="headerlink" href="#log-entry-viewer" title="Permalink to this headline">¶</a></h2>
<p>The menu item Applications -&gt; Utility -&gt; Log Entry Table will launch an application (in a new tab) in which the user may
search and view log entries:</p>
<img alt="../../../../../_images/LogEntryTable.png" src="../../../../../_images/LogEntryTable.png" />
<p>User may choose to hide some details of each log entry in the list in order to fit more items in the view and to reduce the need
for scrolling. This can be done using the keyboard shortcut <code class="docutils literal notranslate"><span class="pre">CTRL+SHIFT+D</span></code>, or by selecting the
<code class="docutils literal notranslate"><span class="pre">Show/Hide</span> <span class="pre">Details</span></code> item from the context menu invoked through a right click in the table view. The choice
to show or hide details is persisted between restarts of the application.</p>
<img alt="../../../../../_images/ContextMenuLogEntryTable.png" src="../../../../../_images/ContextMenuLogEntryTable.png" />
<p>In the search field the user may specify criteria when searching for log entries. These criteria are based on
the elements of a log entry as follows:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">desc</span></code> or <code class="docutils literal notranslate"><span class="pre">description</span></code>: The body text, whereby any markup characters are ignored. The search is case insensitive.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">title</span></code>: The title of the log entry. The search is case insensitive.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">level</span></code>: The value of the Level field.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logbooks</span></code>: A comma separated list of logbook names. Log entries contained in either of the listed logbooks will match.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tag</span></code>: A comma separated list of tag names. Log entries tagged with either of the listed tags will match.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">owner</span></code>: The author of a log entry as specified in the Username field when the entry was created.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start</span></code>: Defines the start date limit in a search. Time may be specified using the format <code class="docutils literal notranslate"><span class="pre">yyyy-MM-dd</span> <span class="pre">HH:mm:ss.SSS</span></code> or a relative time like “8 hours” or “2 days”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">end</span></code>: Defines the end date limit in a search. Time may be specified using the format <code class="docutils literal notranslate"><span class="pre">yyyy-MM-dd</span> <span class="pre">HH:mm:ss.SSS</span></code> or a relative time like “8 hours” or “2 days”. The value “now” is supported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">properties</span></code>. Both property names as well as key name and value of the items in a property can be searched like so:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">properties=property</span> <span class="pre">name</span></code> find log entries containing a property named “property name”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">properties=property</span> <span class="pre">name.key</span> <span class="pre">name</span></code> find log entries containing a property names “property name” and that contains a key named “key name”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">properties=property</span> <span class="pre">name.key</span> <span class="pre">name.value</span></code> find log entries containing a property named “property name” and that contains a key named “key named” with a value of “value”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">properties=property</span> <span class="pre">name</span> <span class="pre">1|property</span> <span class="pre">name</span> <span class="pre">2</span></code> find log entries containing a property named “property name 1” <strong>or</strong> a property named “property name 2”. The pipe character is used to separate search expressions.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="section" id="query-history">
<h3>Query history<a class="headerlink" href="#query-history" title="Permalink to this headline">¶</a></h3>
<p>Search queries entered by the user are put onto a first-in-first-out query history list. A button next to the search
field will expand a drop-down box to show previously used queries, see screen shot below. Queries are ordered by last-used-time
where the most recent query is on top. When new queries are entered by user, older queries may be
flushed out as the maximum size of the list is limited (15 by default, configurable between 5 and 30). The “default”
search query - rendered in bold font in the list - as defined in the preferences is however never flushed.</p>
<p>When user has selected a query from the list, a search button (up or down arrow) must be clicked in order to dispatch the search request.
Pressing ENTER when editing a query in the search field will also trigger a search, and the query is put in
the history list.</p>
<img alt="../../../../../_images/QueryHistory.png" src="../../../../../_images/QueryHistory.png" />
</div>
<div class="section" id="pagination">
<h3>Pagination<a class="headerlink" href="#pagination" title="Permalink to this headline">¶</a></h3>
<p>Each search request will retrieve a limited number of matching log entries to render in the list view. This limit
- aka “page size” - defaults to 30, but may be changed by a property value override. In addition, user may override the
default page size in the UI. Page size must be between 1 and 999. If the search results in a hit count larger
than the page size, the UI will render page navigation buttons below the list of log entries. The current page and
total number of pages is also shown, see screen shot.
The navigation buttons are not rendered if hit count less or equal to the page size.</p>
<img alt="../../../../../_images/pagination.png" src="../../../../../_images/pagination.png" />
</div>
<div class="section" id="periodic-search">
<span id="preferences"></span><h3>Periodic Search<a class="headerlink" href="#periodic-search" title="Permalink to this headline">¶</a></h3>
<p>When a user-initiated search request has completed, a background task is launched to repeatedly (once every 30 seconds) perform a new search
using the same search query. If the user edits the query to launch a new search request, the current periodic search is
aborted and re-launched when the search request completes.</p>
<p>The periodic search feature will consequently keep the list of matching queries updated when new log entries matching the current query are added.</p>
<p>Any failure in a search request - whether manually triggered by the user or by the background task - will abort the
periodic search. User will need to trigger another search request to restart the process.</p>
</div>
</div>
<div class="section" id="attachment-preview">
<h2>Attachment Preview<a class="headerlink" href="#attachment-preview" title="Permalink to this headline">¶</a></h2>
<p>When viewing a log entry, attachments are listed in the attachments view. A preview of an image attachment is shown
when user selects it. To see the attachment in full resolution, user may click on the preview image, or double-click
in the attachment list.</p>
<p>If user double-clicks on a OPI file attachment (.bob file), the application will launch that OPI in run mode.</p>
<p>If user double-clicks on a Data Browser attachment (.plt file), the application will launch the Data Browser.</p>
<p>Preview of non-image files is not offered in the application. However, external viewers may be configured for
arbitrary file extensions, see <a href="#id2"><span class="problematic" id="id3">preference_settings_</span></a> (framework.workbench) for more information.</p>
</div>
<div class="section" id="log-entry-grouping">
<h2>Log Entry Grouping<a class="headerlink" href="#log-entry-grouping" title="Permalink to this headline">¶</a></h2>
<p>The preference setting <code class="docutils literal notranslate"><span class="pre">log_entry_groups_support</span></code> - if set to <code class="docutils literal notranslate"><span class="pre">true</span></code> - will enable the “log entry grouping”
feature. With this users will be able to reply to individual log entries implicitly creating a group of log entries. To use this
feature user can choose to:</p>
<ul class="simple">
<li><p>Press the Reply button shown in the log entry view:</p></li>
</ul>
<img alt="../../../../../_images/ReplyToLogEntry.png" src="../../../../../_images/ReplyToLogEntry.png" />
<ul class="simple">
<li><p>Select “Group Selected Entries” from the context menu shown on right click in the search result table view. This menu item is enabled when at least two items are selected:</p></li>
</ul>
<img alt="../../../../../_images/ContextMenuLogEntryTable.png" src="../../../../../_images/ContextMenuLogEntryTable.png" />
<p>Log entries that are contained in a log entry group are rendered with a grey background in the search result table view.
In the log entry view, the “Show/Hide Group” button (see screen shot above) can be used to show all log entries of a group sequentially,
ordered on created date with oldest log entry on top. In this merged view attachments and properties are not shown.
Clicking on a header in the merged view will show that log entry in full.</p>
<div class="section" id="limitations">
<h3>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h3>
<p>Please consider the following limitations of the log entry group feature:</p>
<ul class="simple">
<li><p>A log entry group should not be regarded as a discussion thread.</p></li>
<li><p>There is no support for “groups of groups”, or “sub-groups”.</p></li>
<li><p>There is no parent-child relation between log entries in a group, i.e. there is no internal structure of the log entries in a group.</p></li>
<li><p>A log entry may be included in only one log entry group. It is hence not possible to create a new group of log entries if these are already contained in different groups.</p></li>
</ul>
</div>
</div>
<div class="section" id="id1">
<h2>Preferences<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Preferences related to the electronic logbook are the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">org.phoebus.olog.es.api/olog_url</span></code>. This should be on the format <code class="docutils literal notranslate"><span class="pre">http(s)://foo.com/Olog</span></code>, where the path element <code class="docutils literal notranslate"><span class="pre">Olog</span></code> may not be omitted.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">org.phoebus.logbook.olog.ui/default_logbooks</span></code>. This is a comma separated list of logbooks automatically associated with a new log entry.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">org.phoebus.logbook.olog.ui/level_field_name</span></code>. The text shown next to the drop-down below the password field. Sites may wish to customize this to override the default value “Level”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">org.phoebus.olog.es.api/levels</span></code>. List of items shown in the “Level” drop-down.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">org.phoebus.logbook.ui/save_credentials</span></code>. Indicates if user credentials should be cached. If <code class="docutils literal notranslate"><span class="pre">true</span></code>, the user will
have to specify credentials only for the first new log entry after launch of CS Studio. The side effect of credentials caching is that all entries will be created with the same user (owner) identity.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">search_result_page_size</span></code>. The maximum number of hits per page to fetch and render in a search. User may override in the UI. Value must be 1 - 999, default is 30.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_entry_groups_support</span></code>. If true, user may reply to log entries and create a log entry group from a selection of existing log entries.</p></li>
</ul>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Olog</a><ul>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#launching-the-log-entry-editor">Launching the log entry editor</a></li>
<li><a class="reference internal" href="#editing-a-log-entry">Editing a log entry</a></li>
<li><a class="reference internal" href="#attachments">Attachments</a></li>
<li><a class="reference internal" href="#embedded-images">Embedded images</a></li>
<li><a class="reference internal" href="#properties">Properties</a></li>
<li><a class="reference internal" href="#log-entry-viewer">Log entry viewer</a><ul>
<li><a class="reference internal" href="#query-history">Query history</a></li>
<li><a class="reference internal" href="#pagination">Pagination</a></li>
<li><a class="reference internal" href="#periodic-search">Periodic Search</a></li>
</ul>
</li>
<li><a class="reference internal" href="#attachment-preview">Attachment Preview</a></li>
<li><a class="reference internal" href="#log-entry-grouping">Log Entry Grouping</a><ul>
<li><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1">Preferences</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../../../../imageviewer/doc/index.html"
                        title="previous chapter">Image Viewer</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../../../save-and-restore/app/doc/index.html"
                        title="next chapter">Save-And-Restore</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../../_sources/app/logbook/olog/ui/doc/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../save-and-restore/app/doc/index.html" title="Save-And-Restore"
             >next</a> |</li>
        <li class="right" >
          <a href="../../../../imageviewer/doc/index.html" title="Image Viewer"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.html">Phoebus 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../../../applications.html" >Applications</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Olog</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Phoebus Developers.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>
  </body>
</html>